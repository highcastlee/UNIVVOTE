(()=>{function t(t){this.obj=document.getElementById(t)}window.history.replaceState&&window.history.replaceState(null,null,window.location.href),t.prototype.openModal=function(){this.obj.setAttribute("style","display:block; z-Index:999; animation: modal-fadein 1s;")},t.prototype.closeModal=function(){this.obj.setAttribute("style","display:none;")},t.prototype.fadeoutCloseModal=function(){this.obj.setAttribute("style","display:block; z-Index:999; animation: modal-fadeout 1.3s;"),this.fadeoutDelay()},t.prototype.fadeoutDelay=function(){setTimeout((()=>{this.closeModal()}),1e3)};const e=document.getElementById("sharingBtn"),n=new t("urlModal");e.addEventListener("click",(function(){n.openModal(),o(),setTimeout((()=>{n.fadeoutCloseModal()}),2e3)}));var i=document.getElementById("urlText");i.value=window.document.location.href;var o=function(){i.select(),document.execCommand("copy"),i.blur()};const s=document.getElementById("loginBtn"),a=new t("loginModal");null!=s&&s.addEventListener("click",(function(){a.openModal()}));const u=document.getElementById("voteBtn"),c=new t("voteModal");u.addEventListener("click",(function(){c.openModal()}));const r=document.getElementById("writeBtn"),L=new t("writeModal");r.addEventListener("click",(function(){L.openModal()}));const l=document.getElementsByClassName("back-btn-box");for(let t=0;t<l.length;t++)l[t].addEventListener("click",(function(){if(0==t)a.closeModal();else if(1==t)c.closeModal();else{if(2!=t)return;L.closeModal()}}));function h(t,e,n,i){this.count=0,this.diff=0,this.plus=n,this.Isfloat=i,this.target_count=parseFloat(e).toFixed(this.Isfloat),this.target_frame=document.getElementById(t),this.timer=null,this.counter()}function f(t,e){this.count=t,this.sum=e}h.prototype.counter=function(){var t=this;this.diff=this.target_count-this.count,this.diff=this.diff,this.diff>0&&(t.count+=this.plus),this.target_frame.innerHTML=this.count.toFixed(this.Isfloat).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.count<this.target_count?this.timer=setTimeout((function(){t.counter()}),30):(this.target_frame.innerHTML=this.target_count.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),clearTimeout(this.timer))},f.prototype.calcPercent=function(){return this.count/this.sum*100};let g,d,k,m,C=0;const w=new XMLHttpRequest;w.responseType="text",w.open("GET","voteInfo.json",!0),w.send(null),w.addEventListener("load",(function(){g=w.responseText,d=JSON.parse(g),k=d.voteCount,m=d.studentCount,C=k>3e3?47:k>1e3?37:17,document.getElementById("studentData").innerHTML="/ "+m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),new h("percentData",new f(k,m).calcPercent(),.7,!0),new h("countData",k,C,!1)}),!1),document.getElementById("voteForm").addEventListener("submit",(async t=>{t.preventDefault();const e=t.target.userMajor,n={majorId:e.options[e.selectedIndex].value},i=new XMLHttpRequest;i.onreadystatechange=function(){200===i.status||201===i.status?console.log(i.responseText):console.error(i.responseText)},i.open("POST","/vote",!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(n)),location.reload()}));const y=document.getElementsByClassName("unSubmit");for(let t=0;t<y.length;t++)y[t].addEventListener("click",(function(t){alert("로그인이 필요한 서비스입니다."),t.preventDefault()}));const B=document.getElementsByClassName("alreadySubmit");for(let t=0;t<B.length;t++)B[t].addEventListener("click",(function(t){alert("이미 참여하셨습니다."),t.preventDefault()}));function p(t,e){this.objBtn=document.getElementById(t),this.objCount=document.getElementById(e),this.count,this.state=!1}let R,b;document.getElementById("writeForm").addEventListener("submit",(async t=>{t.preventDefault();const e=t.target.writeContent.value;if(!e)return alert("내용을 입력하세요");try{const t={userComment:e},n=new XMLHttpRequest;n.onreadystatechange=function(){200===n.status||201===n.status?console.log(n.responseText):console.error(n.responseText)},n.open("POST","/comment",!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t)),location.reload()}catch(t){console.error(t)}})),p.prototype={getCount:function(){return this.count},setCount:function(t){this.count=t},getIsLiked:function(){return this.state},setClickEvent:function(){this.changeLikeBtn(),this.changeLikeCount(),this.changeLikeState()},displayCount:function(){this.objCount.textContent=this.count},changeLikeCount:function(){this.state?this.objCount.textContent=--this.count:this.objCount.textContent=++this.count},changeLikeBtn:function(){this.state?this.objBtn.setAttribute("src","image/heartBlue.png"):this.objBtn.setAttribute("src","image/heartRed.png")},changeLikeState:function(){this.state?this.state=!1:this.state=!0},addEvent:function(t){let e=this;this.objBtn.addEventListener("click",(async function(){e.setClickEvent();let n=e.getCount(),i=t,o=e.state;try{const t={count:n,likeId:i,state:o},e=new XMLHttpRequest;e.open("POST","/like",!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(t))}catch(t){console.error(t)}}))},checkLogin:function(){return"unSubmit"==this.objBtn.classList[1]},checkLikeState:function(){"pledge-like-btn-red"==this.objBtn.className&&this.changeLikeState()}};const E=new XMLHttpRequest;E.responseType="text",E.open("GET","likeInfo.json",!0),E.send(null),E.addEventListener("load",(function(){R=E.responseText,b=JSON.parse(R);const t=function(t,e,n,i,o,s,a){e.checkLikeState(),n.checkLikeState(),i.checkLikeState(),o.checkLikeState(),s.checkLikeState(),a.checkLikeState(),e.setCount(b[t-1].sum),e.displayCount(),n.setCount(b[t].sum),n.displayCount(),i.setCount(b[t+1].sum),i.displayCount(),o.setCount(b[t+2].sum),o.displayCount(),s.setCount(b[t+3].sum),s.displayCount(),a.setCount(b[t+4].sum),a.displayCount(),e.checkLogin()||n.checkLogin()||i.checkLogin()||o.checkLogin()||s.checkLogin()||a.checkLogin()||(e.addEvent(t),n.addEvent(t+1),i.addEvent(t+2),o.addEvent(t+3),s.addEvent(t+4),a.addEvent(t+5))},e=new p("associationLikeBtnLeft-01","associationLikeCountLeft-01"),n=new p("associationLikeBtnLeft-02","associationLikeCountLeft-02"),i=new p("associationLikeBtnLeft-03","associationLikeCountLeft-03"),o=new p("associationLikeBtnRight-01","associationLikeCountRight-01"),s=new p("associationLikeBtnRight-02","associationLikeCountRight-02"),a=new p("associationLikeBtnRight-03","associationLikeCountRight-03"),u=new p("energyLikeBtnLeft-01","energyLikeCountLeft-01"),c=new p("energyLikeBtnLeft-02","energyLikeCountLeft-02"),r=new p("energyLikeBtnLeft-03","energyLikeCountLeft-03"),L=new p("energyLikeBtnRight-01","energyLikeCountRight-01"),l=new p("energyLikeBtnRight-02","energyLikeCountRight-02"),h=new p("energyLikeBtnRight-03","energyLikeCountRight-03"),f=new p("engineeringLikeBtnLeft-01","engineeringLikeCountLeft-01"),g=new p("engineeringLikeBtnLeft-02","engineeringLikeCountLeft-02"),d=new p("engineeringLikeBtnLeft-03","engineeringLikeCountLeft-03"),k=new p("engineeringLikeBtnRight-01","engineeringLikeCountRight-01"),m=new p("engineeringLikeBtnRight-02","engineeringLikeCountRight-02"),C=new p("engineeringLikeBtnRight-03","engineeringLikeCountRight-03"),w=new p("humanityLikeBtnLeft-01","humanityLikeCountLeft-01"),y=new p("humanityLikeBtnLeft-02","humanityLikeCountLeft-02"),B=new p("humanityLikeBtnLeft-03","humanityLikeCountLeft-03"),v=new p("humanityLikeBtnRight-01","humanityLikeCountRight-01"),S=new p("humanityLikeBtnRight-02","humanityLikeCountRight-02"),M=new p("humanityLikeBtnRight-03","humanityLikeCountRight-03"),T=new p("informationLikeBtnLeft-01","informationLikeCountLeft-01"),I=new p("informationLikeBtnLeft-02","informationLikeCountLeft-02"),j=new p("informationLikeBtnLeft-03","informationLikeCountLeft-03"),x=new p("informationLikeBtnRight-01","informationLikeCountRight-01"),H=new p("informationLikeBtnRight-02","informationLikeCountRight-02"),D=new p("informationLikeBtnRight-03","informationLikeCountRight-03"),N=new p("welfareLikeBtnLeft-01","welfareLikeCountLeft-01"),q=new p("welfareLikeBtnLeft-02","welfareLikeCountLeft-02"),O=new p("welfareLikeBtnLeft-03","welfareLikeCountLeft-03"),_=new p("welfareLikeBtnRight-01","welfareLikeCountRight-01"),A=new p("welfareLikeBtnRight-02","welfareLikeCountRight-02"),F=new p("welfareLikeBtnRight-03","welfareLikeCountRight-03"),J=new p("artLikeBtnLeft-01","artLikeCountLeft-01"),P=new p("artLikeBtnLeft-02","artLikeCountLeft-02"),X=new p("artLikeBtnLeft-03","artLikeCountLeft-03"),z=new p("artLikeBtnRight-01","artLikeCountRight-01"),G=new p("artLikeBtnRight-02","artLikeCountRight-02"),K=new p("artLikeBtnRight-03","artLikeCountRight-03"),Q=new p("clubLikeBtnLeft-01","clubLikeCountLeft-01"),U=new p("clubLikeBtnLeft-02","clubLikeCountLeft-02"),V=new p("clubLikeBtnLeft-03","clubLikeCountLeft-03"),W=new p("clubLikeBtnRight-01","clubLikeCountRight-01"),Y=new p("clubLikeBtnRight-02","clubLikeCountRight-02"),Z=new p("clubLikeBtnRight-03","clubLikeCountRight-03");t(1,e,n,i,o,s,a),t(7,N,q,O,_,A,F),t(43,Q,U,V,W,Y,Z),t(13,w,y,B,v,S,M),t(19,T,I,j,x,H,D),t(25,f,g,d,k,m,C),t(31,u,c,r,L,l,h),t(37,J,P,X,z,G,K)}));const v=document.getElementsByClassName("anchor");for(let t=0;t<v.length;t++)v[t].addEventListener("click",(function(t){t.preventDefault()}))})();